<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>The dream of FOSS Hardware: A whisper in the wind | Jay Little</title>
<meta name="keywords" content="">
<meta name="description" content="As everybody who reads this site on a regular basis knows, I&rsquo;m a strong advocate for Free and Open Source Software (FOSS). What I don&rsquo;t spent quite as much time talking about are my preferences regarding hardware. The reason for this is pretty simple. My hardware preferences are pretty fleeting. While I have been a dedicated user of Linux for years, I struggle when it comes to identifying an equivalent entity on the hardware side of the fence.">
<meta name="author" content="Jay Little">
<link rel="canonical" href="https://jaylittle.github.io/post/view/2018/1/the-dream-of-foss-hardware-a-whisper-in-the-wind/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jaylittle.github.io/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://jaylittle.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jaylittle.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jaylittle.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://jaylittle.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="The dream of FOSS Hardware: A whisper in the wind" />
<meta property="og:description" content="As everybody who reads this site on a regular basis knows, I&rsquo;m a strong advocate for Free and Open Source Software (FOSS). What I don&rsquo;t spent quite as much time talking about are my preferences regarding hardware. The reason for this is pretty simple. My hardware preferences are pretty fleeting. While I have been a dedicated user of Linux for years, I struggle when it comes to identifying an equivalent entity on the hardware side of the fence." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jaylittle.github.io/post/view/2018/1/the-dream-of-foss-hardware-a-whisper-in-the-wind/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-01-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-01-08T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The dream of FOSS Hardware: A whisper in the wind"/>
<meta name="twitter:description" content="As everybody who reads this site on a regular basis knows, I&rsquo;m a strong advocate for Free and Open Source Software (FOSS). What I don&rsquo;t spent quite as much time talking about are my preferences regarding hardware. The reason for this is pretty simple. My hardware preferences are pretty fleeting. While I have been a dedicated user of Linux for years, I struggle when it comes to identifying an equivalent entity on the hardware side of the fence."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://jaylittle.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "The dream of FOSS Hardware: A whisper in the wind",
      "item": "https://jaylittle.github.io/post/view/2018/1/the-dream-of-foss-hardware-a-whisper-in-the-wind/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "The dream of FOSS Hardware: A whisper in the wind",
  "name": "The dream of FOSS Hardware: A whisper in the wind",
  "description": "As everybody who reads this site on a regular basis knows, I\u0026rsquo;m a strong advocate for Free and Open Source Software (FOSS). What I don\u0026rsquo;t spent quite as much time talking about are my preferences regarding hardware. The reason for this is pretty simple. My hardware preferences are pretty fleeting. While I have been a dedicated user of Linux for years, I struggle when it comes to identifying an equivalent entity on the hardware side of the fence.",
  "keywords": [
    
  ],
  "articleBody": "As everybody who reads this site on a regular basis knows, I’m a strong advocate for Free and Open Source Software (FOSS). What I don’t spent quite as much time talking about are my preferences regarding hardware. The reason for this is pretty simple. My hardware preferences are pretty fleeting. While I have been a dedicated user of Linux for years, I struggle when it comes to identifying an equivalent entity on the hardware side of the fence.\nMind you, in person I get asked this kind of thing all the time. Relatives like to ask the tell-tale question of, “What laptop should I buy?” Hell if I know. Half the time I barely know what to buy for myself much less them. The reality is that I have started to integrate FOSS standards into my hardware selection process. This makes it exceedingly difficult to buy hardware as there really isn’t any hardware out there which meets the high standards set by FOSS.\nThat’s as much a testament to the awesomeness of FOSS as it is to the lackadaisicalness of the hardware companies. But its not just the front line hardware companies that are the issue here. The problems on the hardware side of the fence actually go much deeper than the OEMs themselves. Take the processors for instance. When purchasing a run of the mill laptop your typical choice is between hardware built around an Intel processor and hardware built around an Intel processor. Yes you read that correctly. In the world of portable computing involving a keyboard, ARM is pretty non-existent minus a few hobbyist options such as this or even this. Sadly I own versions of both of those and I can confirm that neither is suitable for daily use.\nSo whats the problem with Intel? Well the answer to that is complicated and can generally can be summed up with two words: A lot. To be more specific Intel Management Engine is a pretty big problem. What is Intel ME? Well it’s basically another processor built into your Intel processor which runs its own OS and has access to everything your processor has access to. It also runs an OS you have no control over. In other words for the typical FOSS advocate: It’s the anti-christ. On top of all this, Intel ME has recently been diagnosed with a variety of security holes. But wait, that’s not all. Intel has additional problems, not the least of which concerns a raft of security issues revolving around their chip design which are beginning to emerge.\nOkay so how about AMD? Forget it. Not only is their presence in the mobile computing space pretty minimal but their processors ship with something known as a “Platform Secure Processor”. It is the equivalent of Intel ME and it too has massive security holes. What about ARM? I wish. Right now ARM just isn’t competitive enough in a laptop space to be able to produce a performant processor and/or system unencumbered enough to please a FOSS advocate such as myself. While we’ve got a few FOSS friendly pieces of ARM hardware such as the Raspberry Pi, they just aren’t good enough for day to day end user tasks such as browsing the web.\nOkay so having said all that, I have a confession to make. I’m typing this to you on a laptop that is powered by an Intel processor. That’s right. My current laptop of choice is a Purism Librem 15 rev3. Now to be clear: Purism is on the right side of this battle. Their laptops are expensive. Why? Because they are taking the time to fight this battle and they take it very seriously. For starters Purism laptops ship with Intel ME neutralized and disabled. Most of the ME subsystem has been completely removed from the system firmware (except the tiny part this is actually required to boot the system). In addition the system doesn’t rely upon a closed source BIOS or UEFI component and instead uses open source firmware known as CoreBoot.\nThe hardware inside the Purism can be operated entirely via FOSS drivers, no binary blobs required. To be blunt: I love this laptop. However, even I had to compromise on this ideal to some extent. For example: The wifi card the Purism ships with may be completely usable with FOSS drivers but it also happens to be terrible and doesn’t have 802.11ac capability. I have since rectified that by replacing it with an Intel 8260. It has its quirks in this particular configuration (needs to reboot after a cold boot in order for the wifi card to work, but this is negated for me by a perfect implementation of sleep and wake) but it was worth it as my wireless performs wonderfully. I have a compatible Broadcom card that I purchased which exhibited promising results during my initial testing as it appeared to not suffer from this quirk. However Broadcom’s reputation in the FOSS world is pretty bad though this card does have FOSS drivers via the broadcom-wl driver. That driver does however require a firmware binary blob similar to the Intel one. Nevertheless I will probably be giving that card another shot down the road. Yes to be clear: While I am a FOSS advocate, I am also a pragmatist.\nPrior to the Librem laptop, I was using a Lenovo Thinkpad t460s which unceremoniously fried itself after a year and a half of daily use one morning four months ago while I was docking it. While it was a decent laptop with solid Linux compatibility, the truth is that the Librem is far superior. My Linux experience has been frought with far less drama on the Librem than it was on the t460s. Prior to the t460s I was using a Lenovo Thinkpad Carbon X1 (3rd Generation) which was handed down to my wife after a year. She was using it until a few days ago when an unfortunate drop of a few inches onto carpet rendered the laptop unusable.\nSo what did I replace her Lenovo with? Not a Purism sadly as I just don’t have that kind of scratch (nor time as shipping times seem to vary on Purism hardware). Instead I bought her a System 76 Galago Pro with a very close to baseline configuration as her requirements aren’t particularly high. System 76 makes a solid laptop. I have owned several of their models over the years and I have generally been pleased with them. The only thing that drove me into the arms of Lenovo from System 76 to begin with was a desire for more battery life. Sadly while it appears that System 76 has yet to tackle this issue, they are working to make their hardware more free by disabling Intel ME on their shipping hardware. To be clear: This is a huge step forward and represents a more mainstream adoption of an approach that until recently was considered the sole provision of conspiracy theorists and privacy hardliners/kooks such as myself.\nOf course it doesn’t hurt that the Galago Pro is small, cute and appears to be widely coveted throughout the Linux community. While I have yet to receive it, I have very high hopes for it. My wife on the other hand is estatic. Why? Well as it turns out this is actually the first laptop I have ever purchased just for her. She has for all intents and purposes been using my hand-me-downs for almost 14 years now. You know what though? I’ll sneak some time with it. I can’t help but to be jealous of it.\nWhat would I recommend the average run of the mill user buy? In truth, I have no idea. I’m simply not in tune enough with the needs and desires of the average user. In addition, most of them want Windows compatible systems and to be honest: That is the absolute last thing I would want. At the end of the day the diametric opposition in our requirements means that I am thoroughly unqualified to offer advice in that situation.\n",
  "wordCount" : "1349",
  "inLanguage": "en",
  "datePublished": "2018-01-08T00:00:00Z",
  "dateModified": "2018-01-08T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "Jay Little"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jaylittle.github.io/post/view/2018/1/the-dream-of-foss-hardware-a-whisper-in-the-wind/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Jay Little",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jaylittle.github.io/favicon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jaylittle.github.io" accesskey="h" title="Jay Little (Alt + H)">Jay Little</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jaylittle.github.io/article/view/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://jaylittle.github.io/post/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://jaylittle.github.io/resume/" title="Resume">
                    <span>Resume</span>
                </a>
            </li>
            <li>
                <a href="https://jaylittle.github.io/article/view/jay-and-annette-wedding-2004/" title="Family">
                    <span>Family</span>
                </a>
            </li>
            <li>
                <a href="https://jaylittle.github.io/article/view/recipes/" title="Recipes">
                    <span>Recipes</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://jaylittle.github.io">Home</a>&nbsp;»&nbsp;<a href="https://jaylittle.github.io/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      The dream of FOSS Hardware: A whisper in the wind
    </h1>
    <div class="post-meta"><span title='2018-01-08 00:00:00 +0000 UTC'>January 8, 2018</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Jay Little

</div>
  </header> 
  <div class="post-content"><p>As everybody who reads this site on a regular basis knows, I&rsquo;m a strong advocate for Free and Open Source Software (FOSS).  What I don&rsquo;t spent quite as much time talking about are my preferences regarding hardware.  The reason for this is pretty simple.  My hardware preferences are pretty fleeting.  While I have been a dedicated user of Linux for years, I struggle when it comes to identifying an equivalent entity on the hardware side of the fence.</p>
<p>Mind you, in person I get asked this kind of thing all the time.  Relatives like to ask the tell-tale question of, &ldquo;What laptop should I buy?&rdquo;  Hell if I know.  Half the time I barely know what to buy for myself much less them.  The reality is that I have started to integrate FOSS standards into my hardware selection process.  This makes it exceedingly difficult to buy hardware as there really isn&rsquo;t any hardware out there which meets the high standards set by FOSS.</p>
<p>That&rsquo;s as much a testament to the awesomeness of FOSS as it is to the lackadaisicalness of the hardware companies.  But its not just the front line hardware companies that are the issue here.  The problems on the hardware side of the fence actually go much deeper than the OEMs themselves.  Take the processors for instance.  When purchasing a run of the mill laptop your typical choice is between hardware built around an Intel processor and hardware built around an Intel processor.  Yes you read that correctly.  In the world of portable computing involving a keyboard, ARM is pretty non-existent minus a few hobbyist options <a href="https://www.pine64.org/?page_id=3707">such as this</a> or even <a href="https://pi-top.com/products/pi-top">this</a>.  Sadly I own versions of both of those and I can confirm that neither is suitable for daily use.</p>
<p>So whats the problem with Intel? Well the answer to that is complicated and can generally can be summed up with two words: A lot.  To be more specific <a href="https://en.wikipedia.org/wiki/Intel_Management_Engine">Intel Management Engine</a> is a pretty big problem.  What is Intel ME?  Well it&rsquo;s basically another processor built into your Intel processor which runs its own OS and has access to everything your processor has access to.  It also runs an OS you have no control over.  In other words for the typical FOSS advocate: It&rsquo;s the anti-christ.  On top of all this, Intel ME has recently been diagnosed with a <a href="https://www.laptopmag.com/articles/intel-me-security-flaw">variety of security holes</a>.  But wait, that&rsquo;s not all.  Intel has additional problems, not the least of which concerns a raft of security issues revolving around their chip design which are <a href="https://en.wikipedia.org/wiki/Meltdown_(security_vulnerability)">beginning to emerge</a>.</p>
<p>Okay so how about AMD?  Forget it.  Not only is their presence in the mobile computing space pretty minimal but their processors ship with something known as a &ldquo;Platform Secure Processor&rdquo;.  It is the equivalent of Intel ME and it too has <a href="https://www.bleepingcomputer.com/news/security/security-flaw-in-amds-secure-chip-on-chip-processor-disclosed-online/">massive security holes</a>.  What about ARM?  I wish.  Right now ARM just isn&rsquo;t competitive enough in a laptop space to be able to produce a performant processor and/or system unencumbered enough to please a FOSS advocate such as myself.  While we&rsquo;ve got a few FOSS friendly pieces of ARM hardware such as the Raspberry Pi, they just aren&rsquo;t good enough for day to day end user tasks such as browsing the web.</p>
<p>Okay so having said all that, I have a confession to make.  I&rsquo;m typing this to you on a laptop that is powered by an Intel processor.  That&rsquo;s right.  My current laptop of choice is a <a href="https://puri.sm/products/librem-15/">Purism Librem 15 rev3</a>.  Now to be clear:  Purism is on the right side of this battle.  Their laptops are expensive.  Why?  Because they are taking the time to fight this battle and they take it very seriously.  For starters Purism laptops ship with Intel ME neutralized and disabled.  Most of the ME subsystem has been completely removed from the system firmware (except the tiny part this is actually required to boot the system).  In addition the system doesn&rsquo;t rely upon a closed source BIOS or UEFI component and instead uses open source firmware known as <a href="https://www.coreboot.org/">CoreBoot</a>.</p>
<p>The hardware inside the Purism can be operated entirely via FOSS drivers, no binary blobs required.  To be blunt: I love this laptop.  However, even I had to compromise on this ideal to some extent.  For example: The wifi card the Purism ships with may be completely usable with FOSS drivers but it also happens to be terrible and doesn&rsquo;t have 802.11ac capability.  I have since rectified that by replacing it with an Intel 8260.  It has its quirks in this particular configuration (needs to reboot after a cold boot in order for the wifi card to work, but this is negated for me by a perfect implementation of sleep and wake) but it was worth it as my wireless performs wonderfully.  I have a compatible Broadcom card that I purchased which exhibited promising results during my initial testing as it appeared to not suffer from this quirk.  However Broadcom&rsquo;s reputation in the FOSS world is pretty bad though this card does have FOSS drivers via the broadcom-wl driver.  That driver does however require a firmware binary blob similar to the Intel one.  Nevertheless I will probably be giving that card another shot down the road.  Yes to be clear: While I am a FOSS advocate, I am also a pragmatist.</p>
<p>Prior to the Librem laptop, I was using a Lenovo Thinkpad t460s which unceremoniously fried itself after a year and a half of daily use one morning four months ago while I was docking it.  While it was a decent laptop with solid Linux compatibility, the truth is that the Librem is far superior.  My Linux experience has been frought with far less drama on the Librem than it was on the t460s.  Prior to the t460s I was using a Lenovo Thinkpad Carbon X1 (3rd Generation) which was handed down to my wife after a year.  She was using it until a few days ago when an unfortunate drop of a few inches onto carpet rendered the laptop unusable.</p>
<p>So what did I replace her Lenovo with?  Not a Purism sadly as I just don&rsquo;t have that kind of scratch (nor time as shipping times seem to vary on Purism hardware).  Instead I bought her a <a href="https://system76.com/laptops/galago">System 76 Galago Pro</a> with a very close to baseline configuration as her requirements aren&rsquo;t particularly high.  System 76 makes a solid laptop.  I have owned several of their models over the years and I have generally been pleased with them.  The only thing that drove me into the arms of Lenovo from System 76 to begin with was a desire for more battery life.  Sadly while it appears that System 76 has yet to tackle this issue, they are working to make their hardware more free by <a href="http://blog.system76.com/post/168050597573/system76-me-firmware-updates-plan">disabling Intel ME on their shipping hardware</a>.  To be clear: This is a huge step forward and represents a more mainstream adoption of an approach that until recently was considered the sole provision of conspiracy theorists and privacy hardliners/kooks such as myself.</p>
<p>Of course it doesn&rsquo;t hurt that the Galago Pro is small, cute and appears to be widely coveted throughout the Linux community.  While I have yet to receive it, I have very high hopes for it.  My wife on the other hand is estatic.  Why?  Well as it turns out this is actually the first laptop I have ever purchased just for her.  She has for all intents and purposes been using my hand-me-downs for almost 14 years now.  You know what though?  I&rsquo;ll sneak some time with it.  I can&rsquo;t help but to be jealous of it.</p>
<p>What would I recommend the average run of the mill user buy?  In truth, I have no idea.  I&rsquo;m simply not in tune enough with the needs and desires of the average user.  In addition, most of them want Windows compatible systems and to be honest: That is the absolute last thing I would want.  At the end of the day the diametric opposition in our requirements means that I am thoroughly unqualified to offer advice in that situation.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://jaylittle.github.io">Jay Little</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
